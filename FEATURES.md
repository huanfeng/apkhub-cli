# ApkHub CLI 功能列表

## ✅ 已实现功能

### 核心功能

1. **仓库管理**
   - `init` - 初始化仓库配置文件
   - 标准化目录结构 (apks/infos)
   - 配置文件支持 (apkhub.yaml)

2. **APK 管理**
   - `add` - 添加单个 APK 到仓库
   - `scan` - 批量扫描目录（支持增量更新）
   - `parse` - 解析单个 APK 信息
   - APK 文件名归一化
   - 签名变体处理

3. **仓库维护**
   - `verify` - 验证仓库完整性
   - `clean` - 清理旧版本和孤立文件
   - `stats` - 显示仓库统计信息
   - `list` - 列出仓库内容

4. **数据导出**
   - `export` - 导出为多种格式
     - JSON (完整数据)
     - CSV (表格数据)
     - Markdown (文档)
     - F-Droid (兼容格式)

### 技术特性

1. **APK 解析**
   - 内置 androidbinary 库解析
   - aapt/aapt2 后备解析器
   - 提取完整元数据

2. **增量更新**
   - 基于修改时间判断
   - 避免重复处理
   - 提高扫描效率

3. **数据完整性**
   - SHA256 校验
   - 文件大小验证
   - 签名信息记录

4. **多语言支持**
   - JSON 结构支持多语言
   - 应用名称国际化
   - 描述信息国际化

## 🚧 待实现功能

### 高优先级

1. **XAPK/APKM 支持**
   - 解析分包 APK
   - 处理 OBB 文件
   - 扩展文件管理

2. **导入功能**
   - 从其他格式导入
   - 批量迁移工具
   - 数据转换

### 中优先级

1. **后端 API 服务**
   - RESTful API
   - 搜索和过滤
   - 实时更新通知

2. **Android 客户端**
   - 浏览仓库
   - 下载安装
   - 更新检测

### 低优先级

1. **官方索引平台**
   - 仓库注册
   - 短码连接
   - 仓库推荐

## 📊 命令使用矩阵

| 命令 | 用途 | 使用频率 | 重要性 |
|------|------|----------|--------|
| `add` | 添加单个 APK | 高 | 核心 |
| `scan` | 批量扫描 | 高 | 核心 |
| `verify` | 验证完整性 | 中 | 重要 |
| `clean` | 清理旧版本 | 中 | 重要 |
| `list` | 查看内容 | 高 | 便利 |
| `stats` | 统计分析 | 低 | 便利 |
| `export` | 数据导出 | 低 | 扩展 |
| `parse` | 调试解析 | 低 | 调试 |

## 🔧 配置选项

### Repository 配置
- `name` - 仓库名称
- `description` - 仓库描述
- `base_url` - 下载基础 URL
- `keep_versions` - 保留版本数
- `signature_handling` - 签名处理策略

### Scanning 配置
- `recursive` - 递归扫描
- `follow_symlinks` - 跟随符号链接
- `include_pattern` - 包含模式
- `exclude_pattern` - 排除模式
- `parse_apk_info` - 解析 APK 信息

## 🎯 设计目标

1. **简单易用** - 命令直观，配置简洁
2. **高效可靠** - 增量更新，数据验证
3. **灵活扩展** - 多格式支持，插件机制
4. **分布式友好** - 静态文件，无需数据库
5. **客户端兼容** - 标准 JSON，简单 HTTP